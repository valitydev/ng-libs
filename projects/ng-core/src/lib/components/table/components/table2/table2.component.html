<mat-card class="table-card">
    <table #table [dataSource]="dataSource" mat-table>
        @for (col of normalizedColumns(); track col; let colIndex = $index) {
            <ng-container [matColumnDef]="col.field">
                <th *matHeaderCellDef mat-header-cell>
                    <v-value [value]="(col.header | async) ?? undefined"></v-value>
                </th>
                <td *matCellDef="let row; let rowIndex = index" mat-cell>
                    <v-value [value]="(columnsData$ | async)?.[colIndex]?.[rowIndex]"></v-value>
                </td>
            </ng-container>
        }
        <tr *matHeaderRowDef="displayedColumns()" mat-header-row></tr>
        <tr *matRowDef="let row; columns: displayedColumns()" mat-row></tr>
    </table>
</mat-card>
